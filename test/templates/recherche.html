{{ define "recherche" }}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/css/recherche.css" rel="stylesheet">
    <title>TCGDEX</title>
</head>
<body>
<div class="search-container">
    <form action="/search" method="get">
        <input type="text" name="q" placeholder="Rechercher une carte..." value="{{ .Query | urlquery }}">
        <select name="category">
            <option value="">Toutes cat√©gories</option>
            <option value="Pok√©mon" {{ if eq .Category "Pok√©mon" }}selected{{ end }}>Pok√©mon</option>
            <option value="√ânergie" {{ if eq .Category "√ânergie" }}selected{{ end }}>√ânergie</option>
            <option value="Dresseur" {{ if eq .Category "Dresseur" }}selected{{ end }}>Dresseur</option>
        </select>
        <button type="submit">Rechercher</button>
    </form>

    <div class="results">
        {{ range .Cards }}
        <div class="card">
            <img src="{{ .Image }}" alt="Image de {{ .Name }}" loading="lazy">
            <div class="card-info">
                <h3>{{ .Name }}</h3>
                <p class="category {{ .Category }}">{{ .Category }}</p>
                <p class="rarity">{{ .Rarity }}</p>
                <button class="favorite" data-card-id="{{ .ID }}">
                    {{ if .IsFavorite }}‚ù§Ô∏è Retirer{{ else }}ü§ç Ajouter{{ end }}
                </button>
                <a href="/card?id={{ .ID }}" class="details">D√©tails</a>
            </div>
        </div>
        {{ else }}
        <p class="no-results">Aucun r√©sultat trouv√©</p>
        {{ end }}
    </div>

    {{ if gt .TotalPages 1 }}
    <div class="pagination">
        {{ if gt .Page 1 }}
        <a href="/search?q={{ .Query | urlquery }}&category={{ .Category | urlquery }}&page={{ .PreviousPage }}">Pr√©c√©dent</a>
        {{ end }}

        <span>Page {{ .Page }}/{{ .TotalPages }}</span>

        {{ if lt .Page .TotalPages }}
        <a href="/search?q={{ .Query | urlquery }}&category={{ .Category | urlquery }}&page={{ .NextPage }}">Suivant</a>
        {{ end }}
    </div>
    {{ end }}
</div>
</body>
</html>
{{ end }}
